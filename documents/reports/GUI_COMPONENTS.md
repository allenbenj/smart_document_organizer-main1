# GUI Component Reference

This document describes every Python module that participates in the
Graphical User Interface for the Smart Document Organizer.  It is intended
for developers who need to understand what each piece of the GUI does and
where to make changes.

---

## 1. Entry Points & Main Windows

| File | Role | Details |
|------|------|---------|
| `gui/gui_dashboard.py` | Lightweight dashboard | Tabbed dashboard shell used primarily during
development.  Includes health strip, run console and optional WSL backend
starter thread.  Loads a predefined set of functional tabs.  Contains
`WSLBackendThread` to manage a Linux backend instance. |
| `gui/professional_manager.py` | Professional darkâ€‘theme GUI | Full standalone
application used by power users.  Wraps the same tabs as `gui_dashboard` but
adds extensive styling, health polling, system tray integration, and a
custom dark stylesheet. |

## 2. Root Helpers and Facades

| File | Purpose |
|------|---------|
| `gui/agent_manager.py` | Thin facade exposing the shared
`production_agent_manager` singleton to GUI code. |

## 3. Tab Modules

Each of the following modules defines a `QWidget` subclass that is
instantiated as a tab in the main window(s).

### 3.1 Basic operation

- `gui/tabs/organization_tab.py` â€“ _Organization Tab_: provides
the central workflow for reviewing and approving folder organization
proposals generated by the backend.  Supports scoping, approve/reject,
bulk actions, job monitoring, and ontologyâ€‘based folder assignment.
  - **Path:** `gui/tabs/organization_tab.py`
  - **API calls:** `/api/organization/proposals` (GET/POST/PUT/DELETE),
    `/api/organization/jobs` for background job status, `/api/ontology/*`
    when fetching ontology types.
  - **File operations:** opens file dialogs for folder scoping, writes
    audit logs via `OrganizationAuditStore`.
  - **Data writes:** approval/rejection updates sent to backend,
    generates JSON export via `api_client`.

- `gui/tabs/document_processing_tab.py` â€“ _Document Processing Tab_: handles
file upload (drag/drop and browse), extraction of text/metadata from many
formats, progress reporting, summary displays, and result exports. Acts as
the second stage in the processing pipeline.
  - **Path:** `gui/tabs/document_processing_tab.py`
  - **API calls:** `/api/files/upload` (multipart POST),
    `/api/processing/start`, `/api/processing/status`, `/api/processing/results`
    for job polling, `/api/processing/export` for result exports.
  - **File operations:** writes temporary upload cache, opens file
    dialogs, saves exports to userâ€‘selected locations.
  - **Data writes:** sends raw file binaries to backend; stores
    intermediate state locally in `self.selected_files`.

- `gui/tabs/semantic_analysis_tab.py` â€“ _Semantic Analysis Tab_: offers
summarization, topic/theme detection, sentiment analysis, and other
semantic operations on uploaded text.  Includes strategic refinement
options such as "Smoking Gun Detection" and autoâ€‘labeling themes.
  - **Path:** `gui/tabs/semantic_analysis_tab.py`
  - **API calls:** `/api/semantic/analyze` (POST with file/folder/text),
    `/api/semantic/thematic` for theme labeling, `/api/semantic/outliers`.
  - **File operations:** can browse file/folder; no local writes except
    caching of user inputs.
  - **Data writes:** sends analysis options and text to backend; receives
    JSON results which populate tables.

- `gui/tabs/entity_extraction_tab.py` â€“ _Entity Extraction Tab_: UI for
running the legal AI extraction agents.  Allows selection of files/folders,
handles ontology downloads, displays candidate entities, and triggers
backend calls. Includes expert editing controls.
  - **Path:** `gui/tabs/entity_extraction_tab.py`
  - **API calls:** `/api/extract/run` (send file/folder/text, method POST),
    `/api/ontology/types` (GET), `/api/agents/extract/proposals` for expert
tooling, `/api/agents/memory/proposals` when saving proposals.
  - **File operations:** browsing for documents, optional JSON import
    in memory proposals, no disk writes otherwise.
  - **Data writes:** user edits (approve/reject/modify) are POSTed back to
    the backend; content may be saved as memory proposals via API calls.

- `gui/tabs/legal_reasoning_tab.py` â€“ _Legal Reasoning Tab_: interface for
invoking the reasoning agents against extracted text.  Supports choosing
reasoning prompts/personas, viewing results and stepâ€‘byâ€‘step analysis, and
exporting reasoning output.
  - **Path:** `gui/tabs/legal_reasoning_tab.py`
  - **API calls:** `/api/agents/legal_reasoning` (POST text and parameters),
    `/api/agents/legal_reasoning/status` for job polling, `/api/agents/legal_reasoning/export`
    to retrieve final analysis.
  - **File operations:** users can load source text via file dialog; export
    reasoning to chosen directory.
  - **Data writes:** reasoning requests and any userâ€‘modified outputs are
    sent to backend; minimal local state.

- `gui/tabs/classification_tab.py` â€“ _Classification Tab_: simple promptâ€‘based
text classification using offâ€‘theâ€‘shelf models. Supports file/folder
input, custom labels, and a quality gate checkbox.
  - **Path:** `gui/tabs/classification_tab.py`
  - **API calls:** `/api/classify/text` (POST text or path),
    `/api/classify/batch` (when folder selected).
  - **File operations:** browse file/folder, no writes except optional
    temporary caching.
  - **Data writes:** classification requests posted; results are displayed
    in a table.

- `gui/tabs/embedding_operations_tab.py` â€“ _Embedding Operations Tab_:
allows manual embedding generation, similarity operations, and viewing
model capabilities.  Includes background worker integration.
  - **Path:** `gui/tabs/embedding_operations_tab.py`
  - **API calls:** `/api/embed` (POST text), `/api/embed/similarity`.
  - **File operations:** none except optional copy of results via clipboard.
  - **Data writes:** sends text and parameters; receives embeddings /
    similarity results.

- `gui/tabs/vector_search_tab.py` â€“ _Vector Search Tab_: frontâ€‘end for
semantic retrieval over embedded content.  Handles embedding-assisted
search queries and displays nearest neighbours.  Shows a status banner if
the vector store degrades.
  - **Path:** `gui/tabs/vector_search_tab.py`
  - **API calls:** `/api/embed` for query embedding, `/api/search/vector`
    for the search itself, `/api/vectorestore/status` for availability.
  - **File operations:** none local.
  - **Data writes:** query text posted; no persistent writes.

- `gui/tabs/pipelines_tab.py` â€“ _Pipelines Tab_: run orchestrated
multiâ€‘step processing pipelines with preset definitions and override
controls.  Can customize persona, extractor, classifier, and other
options before execution.

- `gui/tabs/expert_prompts_tab.py` â€“ _Expert Prompts Tab_: build and
preview expert prompts by selecting personas and task types; useful when
handâ€‘crafting input for reasoning/extraction agents.
  - **Path:** `gui/tabs/expert_prompts_tab.py`
  - **API calls:** `/api/prompts/generate` (POST persona/task/text).
  - **File operations:** none (prompts appear in UI only).
  - **Data writes:** sends prompt data to backend; result text returned.

- `gui/tabs/knowledge_graph_tab.py` â€“ _Knowledge Graph Tab_: manage the
internal knowledge graph, query relationships, and perform simple graph
operations.  Allows entity/relationship search and display.
  - **Path:** `gui/tabs/knowledge_graph_tab.py`
  - **API calls:** `/api/knowledgegraph/query` (POST with criteria),
    `/api/knowledgegraph/insert` for manual additions, `/api/knowledgegraph/export`.
  - **File operations:** may open CSV/JSON via dialog for bulk imports.
  - **Data writes:** graph updates are POSTed to backend; none written
    locally.

### 3.2 Advanced governance & analytics

- `gui/tabs/heuristic_lifecycle_tab.py` â€“ _Heuristic Lifecycle Tab_:
admin interface for promoting/demoting AI heuristics, tracking dissent, and
collision detection (AEDIS governance phase).  Displays candidate queue and
allows governance actions.
  - **Path:** `gui/tabs/heuristic_lifecycle_tab.py`  - **API calls:** `/api/heuristics/candidates`, `/api/heuristics/promote`,
    `/api/heuristics/demote`, `/api/heuristics/collision` (all POST/GET).
  - **File operations:** none local.
  - **Data writes:** governance decisions posted to backend.

- `gui/tabs/planner_judge_tab.py` â€“ _Planner-Judge Tab_: compose and test
formal strategies using the Planner and Judge subsystems.  Facilitates
strategy JSON editing and deterministic rule validation.
  - **Path:** `gui/tabs/planner_judge_tab.py`
  - **API calls:** `/api/planner/run`, `/api/judge/evaluate`,
    `/api/judge/status`.
  - **File operations:** strategy JSON can be loaded/saved via file dialogs.
  - **Data writes:** strategies and evaluation results exchanged with backend.

- `gui/tabs/provenance_highlighting.py` â€“ _Provenance Highlighting Tab_:
visualize evidence chains by highlighting text spans inside source
documents; useful for audit and traceability.
  - **Path:** `gui/tabs/provenance_highlighting.py`
  - **API calls:** `/api/provenance/records`, `/api/provenance/highlight`.
  - **File operations:** opens text files for highlighting.
  - **Data writes:** none persistent; interactions are ephemeral.

- `gui/tabs/canonical_artifacts_tab.py` â€“ _Canonical Artifacts Tab_:
manage immutable artifacts and their lineage events.  Allows ingesting
artifacts, appending lineage, and viewing existing records.
  - **Path:** `gui/tabs/canonical_artifacts_tab.py`
  - **API calls:** `/api/canonical/artifact` (POST),
    `/api/canonical/lineage` (POST), `/api/canonical/query` (GET).
  - **File operations:** none local.
  - **Data writes:** artifact and lineage data are sent to backend.

- `gui/tabs/ontology_registry_tab.py` â€“ _Ontology Registry Tab_:
version and activate ontology types (objective, heuristic, schema, etc.).
Essential for controlled updates to classification/open vocabulary rules.
  - **Path:** `gui/tabs/ontology_registry_tab.py`
  - **API calls:** `/api/ontology/registry` (list GET),
    `/api/ontology/registry/create`, `/api/ontology/registry/activate`,
    `/api/ontology/registry/deprecate` (all POST).
  - **File operations:** none local.
  - **Data writes:** registry metadata posted to backend.

- `gui/tabs/diagnostics_tab.py` â€“ _Diagnostics Tab_: multiâ€‘panel viewer for
startup logs, API traffic, bug tracker integration, and other diagnostic
information.  Provides log file browsing and bug report submission.
  - **Path:** `gui/tabs/diagnostics_tab.py`
  - **API calls:** `/api/diagnostics/logs`, `/api/diagnostics/bug`,
    `/api/diagnostics/health`.
  - **File operations:** reads/clears log files from `logs/` directory,
    can open logs folder in explorer.
  - **Data writes:** bug reports and optional log uploads.

- `gui/tabs/contradictions_tab.py` â€“ _Contradictions Tab_: simple text input
or file loader for running the contradictions detection agent and viewing
results.
  - **Path:** `gui/tabs/contradictions_tab.py`
  - **API calls:** `/api/agents/contradictions` (POST text).
  - **File operations:** loads plain text via dialog.
  - **Data writes:** none persistent.

- `gui/tabs/violations_tab.py` â€“ _Violations Tab_: similar to the
contradictions tab but targeting the violations agent; analyzes text for
legal/procedural violations.
  - **Path:** `gui/tabs/violations_tab.py`
  - **API calls:** `/api/agents/violations` (POST text).
  - **File operations:** loads text via dialog.
  - **Data writes:** none persistent.
  - **API calls:** `/api/heuristics/candidates` (GET),
    `/api/heuristics/promote`/`/demote`/`/dissent` (POST) etc.
  - **File operations:** none local.
  - **Data writes:** governance decisions sent to backend.

- `gui/tabs/planner_judge_tab.py` â€“ _Planner-Judge Tab_: compose and test
formal strategies using the Planner and Judge subsystems.  Facilitates
strategy JSON editing and deterministic rule validation.
  - **Path:** `gui/tabs/planner_judge_tab.py`
  - **API calls:** `/api/planner/run` (POST strategy JSON),
    `/api/judge/evaluate`/`/status`.
  - **File operations:** may load/save strategy JSON via file dialog.
  - **Data writes:** strategies sent and results received from backend.

- `gui/tabs/provenance_highlighting.py` â€“ _Provenance Highlighting Tab_:
visualize evidence chains by highlighting text spans inside source
documents; useful for audit and traceability.
  - **Path:** `gui/tabs/provenance_highlighting.py`
  - **API calls:** `/api/provenance/records` (GET),
    `/api/provenance/highlight` (POST text + spans).
  - **File operations:** allows open/save of text files to highlight.
  - **Data writes:** none persistent; interactions are purely for display.

- `gui/tabs/canonical_artifacts_tab.py` â€“ _Canonical Artifacts Tab_:
manage immutable artifacts and their lineage events.  Allows ingesting
artifacts, appending lineage, and viewing existing records.
  - **Path:** `gui/tabs/canonical_artifacts_tab.py`
  - **API calls:** `/api/canonical/artifact` (POST ingests),
    `/api/canonical/lineage` (POST append),
    `/api/canonical/query` (GET).  
  - **File operations:** none local beyond normal text input.
  - **Data writes:** artifact/lineage submissions sent to backend.

- `gui/tabs/ontology_registry_tab.py` â€“ _Ontology Registry Tab_:
version and activate ontology types (objective, heuristic, schema, etc.).
Essential for controlled updates to classification/open vocabulary rules.
  - **Path:** `gui/tabs/ontology_registry_tab.py`
  - **API calls:** `/api/ontology/registry` (GET/list),
    `/api/ontology/registry/create`, `/api/ontology/registry/activate`,
    `/api/ontology/registry/deprecate` (all POST).
  - **File operations:** none local.
  - **Data writes:** registry operations send metadata to backend.

- `gui/tabs/diagnostics_tab.py` â€“ _Diagnostics Tab_: multiâ€‘panel viewer for
startup logs, API traffic, bug tracker integration, and other diagnostic
information.  Provides log file browsing and bug report submission.
  - **Path:** `gui/tabs/diagnostics_tab.py`
  - **API calls:** `/api/diagnostics/logs` (GET),
    `/api/diagnostics/bug` (POST new bug reports), `/api/diagnostics/health`.
  - **File operations:** reads log files from `logs/` directory, can clear
    old logs, open folder in explorer.
  - **Data writes:** bug reports and optionally upload of log snippets.

- `gui/tabs/contradictions_tab.py` â€“ _Contradictions Tab_: simple text input
or file loader for running the contradictions detection agent and viewing
results.
  - **Path:** `gui/tabs/contradictions_tab.py`
  - **API calls:** `/api/agents/contradictions` (POST text).
  - **File operations:** loads plain text files via dialog.
  - **Data writes:** none persistent beyond the request.

- `gui/tabs/violations_tab.py` â€“ _Violations Tab_: similar to the
contradictions tab but targeting the violations agent; analyzes text for
legal/procedural violations.
  - **Path:** `gui/tabs/violations_tab.py`
  - **API calls:** `/api/agents/violations` (POST text).
  - **File operations:** loads text via dialog.
  - **Data writes:** none persistent.

### 3.3 Miscellaneous helpers

- `gui/tabs/default_paths.py` â€“ utility functions that return sensible
file dialog default directories.

- `gui/tabs/org_utils.py` â€“ helper routines used by the organization tab
(e.g. scope normalization).

- `gui/tabs/org_workers.py` â€“ background worker threads for
organization tasks (load proposals, generate proposals, apply/clear them,
etc.).

- `gui/tabs/workers.py` â€“ generic worker classes (embedding, extraction,
legal reasoning) that run heavy tasks in background threads and emit
signals back to the UI.

- `gui/tabs/status_presenter.py` â€“ small class used throughout tabs to
standardize status message display on a given label or widget.


## 4. UI widgets & dialogs

| File | Description |
|------|-------------|
| `gui/ui/nlp_model_manager.py` | Dialog for installing and managing NLP
models (spaCy, GLiNER, transformers); includes background download workers.
|
| `gui/ui/document_preview_widget.py` | Widget to render document previews
(PDF/DOCX/text) inside the GUI. |
| `gui/ui/entity_proposals_widget.py` | Specialized table view for
entity proposals (used in extraction/memory tabs). |
| `gui/ui/knowledge_base_browser.py` | Browser dialog for exploring the
knowledge base. |
| `gui/ui/reporting`.* | various small helper widgets (not all listed).
| `gui/ui/system_tray_icon.py` | System tray integration for the
Professional Manager. |
| `gui/ui/visibility_widgets.py` | helper widgets controlling visibility
of other UI elements. |
| `gui/ui/interactive_stats_dashboard.py` | interactive charts for
statistics. |
| `gui/ui/global_search_dialog.py` | popup dialog to perform a global
search across documents/metadata. |
| `gui/ui/ontology_graph_widget.py` | Graphical widget for rendering
ontology relationships. |

*(The `ui` package contains a number of smaller components that are
instantiated by the tabs above.)*

## 5. Services used by GUI

| File | Purpose |
|------|---------|
| `gui/services/api_client.py` | HTTP helper used by virtually every
widget to call backend REST endpoints. |
| `gui/services/organization_service.py` | Client-side pub/sub logic
for organization jobs. |
| `gui/services/processing_service.py` | Similar service for document
processing jobs. |
| `gui/services/audit_store.py` | Local cache for organization audit
records. |
| `gui/services/model_capability_registry.py` | Manages model availability
and capabilities metadata. |

These modules encapsulate logic that would otherwise be duplicated across
tabs and provide a thin layer over the `requests` library.

## 6. Core utilities

| File | Role |
|------|------|
| `gui/core/__init__.py` | Contains `AsyncioThread` (runs an asyncio
loop in a QThread) and other reusable widgets such as
`AgentStatusWidget`. |

## 7. Workers and background threads

Workers are implemented either inside the `tabs` submodules (e.g.
`EntityExtractionWorker`) or in `gui/tabs/org_workers.py` etc.  They
typically subclass `QThread`, perform backend calls or local processing,
and emit Qt signals to update the UI when finished.  Their presence keeps
the GUI responsive.

## 8. Additional scripts

- `gui/db_monitor.py` â€“ a standalone window for inspecting the internal
SQLite/Neo4j databases (not detailed above).  Mainly used by developers.
- `gui/open_memory_review.py` â€“ helper to open a memory item in the memory
review tab from external contexts.

---

> ðŸ”§ **Note:**  the GUI codebase is highly modular; adding a new tab
requires creating a new module in `gui/tabs/`, writing a simple `QWidget`
and registering it in `gui_dashboard.py` or `professional_manager.py`.

This document should serve as a reference when navigating the GUI
subsystem.  For implementation details, consult the source file itself.

